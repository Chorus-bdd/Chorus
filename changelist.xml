<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="./changelist.xsl"?>
<changes>
    <version>
        <versionNumber>1.5.2-SNAPSHOT</versionNumber>
        <comment>Enhancements to process handling</comment>
        <change desc="When running under JDK 1.7, use ProcessBuilder to create a process - better capture of process output even for quick dying process"/>
        <change desc="add processCheckDelay config setting for Processes - check the process shortly after starting, and fail the step if it terminated with an error code"/>
        <change desc="Scenarios will now fail if processes are set to log output to files, and the log directory is not writable, rather than the output appearing inline with interpreter"/>
        <change desc="Support a more granular OutputMode for treatment of child process std err and process std out, which can now either be either FILE, INLINE or CAPTURED.
        Out and err streams have their own independent setting. 
        The CAPTURED mode will cause chorus to buffer the output and allows you to make use of the handler steps which check it. 
        This still supports the older 'logging' property - when logging=true, use FILE mode for both std err and out, when logging=false use INLINE for both std err and out"/>
    </version>
    <version>
        <versionNumber>1.5.1</versionNumber>
        <comment>Add support for Step-Macro language feature - resuable groups of steps which are preparsed and available within Scenario</comment>
        <change desc="Support feature-local and global StepMacro"/>
        <change desc="Steps may now have child steps (when the step matches a defined StepMacro the macro steps become child steps)"/>
        <change desc="Support stepMacroPaths config parameter which defaults to be the same as featurePaths when not specified"/>
    </version>
    <version>
        <versionNumber>1.5.0</versionNumber>
        <comment>New milestone release of Chorus. This release provides better support for chorus tools via enhanced interpreter result Tokens. Work is underway in the chorus tools project to
        provide a Chorus web agent which can receive results from the interpreter and allows viewing of test suite results in the browser, along with a run history, step timings and rss feed</comment>
        <change desc="New configuration property modes to set certain interpreter properties to override value. This allows log level to be overridden as a classpath switch, for example"/>
        <change desc="-h handlerPackages is once more a mandatory parameter. Problems with class loading during class scanning were too often a cause of issues"/>
        <change desc="Better logging of interpreter switches"/>
        <change desc="More interpreter state is now available in a revised set of serializable chorus Tokens which are sent to remote execution listeners"/>
        <change desc="Each of the tokens apart from Step now has an EndState (passed, failed or pending), Step has its own more granular end states"/>
        <change desc="Add timing information to tokens at step level and a total execution time in suite results"/>
        <change desc="Add configurable scenario timeout which will attempt to interrupt a scenario if it takes too long. New interpreter switch to set the max time"/>
        <change desc="Support the visitor pattern in Chorus results tokens"/>
    </version>
    <version>
        <versionNumber>1.4.16</versionNumber>
        <comment>Bugfixes</comment>
        <bugfix desc="Fix premature closing of standard output stream which was causing some lost output when running Chorus tests as junit suites"/>
    </version>
    <version>
        <versionNumber>1.4.15</versionNumber>
        <comment>Minor enhancements</comment>
        <change desc="Support check() method which validates conditions over the whole duration of a time period in PolledAssertion"/>
        <change desc="Support setting time limit through await() parameters in PolledAssertion"/>
        <change desc="Support for Spring's ContextConfiguration annotation is restored"/>
    </version>
    <version>
        <versionNumber>1.4.14</versionNumber>
        <comment>Minor enhancements</comment>
        <change desc="Add shutdown hook to terminate child process under test in the event of early interpreter exit"/>
    </version>
    <version>
        <versionNumber>1.4.13</versionNumber>
        <comment>Enhancements to process logging and minor fixes and enhancements</comment>
        <change desc="Support process property appendToLog, append to process log files instead of overwriting"/>
        <change desc="Support process property createLogDir, turn off/on auto creation of log directory"/>
        <change desc="log4j.xml process config can now be in local feature directory instead of in ./conf subdirectory"/>
        <change desc="Add PolledAssertion class, a utility to remove sleeps in features by polling/waiting a limited time for an assertion to pass"/>
        <change desc="RemotingHandler now supports steps in the form .* from componentName in addition to .* in componentName"/>
        <change desc="Chorus Tools will now be released/maintained as a separate project"/>
    </version>
    <version>
        <versionNumber>1.4.12</versionNumber>
        <comment>Minor fixes and enhancements</comment>
        <change desc="Now possible to start the interpreter using more succinct org.chorusbdd.Chorus instead of org.chorusbdd.chorus.Main"/>
        <bugfix desc="Pending steps should not cause interpreter to exit with fail status.
        Where all tests either pass or are pending the exit code should be zero (success).
        The point of marking a step as pending is to prevent that step causing failure"/>
    </version>
    <version>
        <versionNumber>1.4.11</versionNumber>
        <comment>Minor fixes and enhancements for handler property files</comment>
        <change desc="More logging when loading handler properties, logging when encountering an unsupported property"/>
        <bugfix desc="Fixed a bug in which default properties not always applied"/>
    </version>
    <version>
        <versionNumber>1.4.10</versionNumber>
        <comment>A new release of chorus with some important enhancements. In particular this release includes more robust handling for establishing remote connections using Remoting handler jmx, and more flexible configuration options for handlers</comment>
        <change desc="Remoting handler makes a configurable number of attempts to connect before failing when using JMX protocol. The number of attempts is configured using the connectionAttempts and the wait between each failed attempt and the next is configured using connectionAttemptMillis remoting handler properties"/>
        <change desc="Changes to ChorusHandlerExporter to allow a remote process to export multiple handlers in one atomic operation"/>
        <change desc="Process handler now supports a step to wait until a process terminates"/>
        <change desc="Standardise property file loading logic across all built in handlers"/>
        <change desc="Support loading a chorus.properties from the classpath, also support chorus.properties and featurename.properties local to feature directory"/>
        <change desc="Handler property files may now be in either the main feature directory or the subdirectory conf"/>
        <change desc="Where a property file name does not contain a suffix identifying the handler (e.g. -remoting.properties) then the handler type must be the first token of each property key e.g. remoting.myprocess.connectionAttempts=10"/>
        <change desc="Support setting defaults for handler configuration properties in property files as handlerType.default.propertyName"/>
        <change desc="Expand system properties and chorus properties ${chorus.featuredir} ${chorus.featurefile} ${chorus.featurename} ${chorus.featureconfig} in property file values loaded"/>
        <change desc="Remote exceptions are named in the interpreter output and the class and line number where the exception occurred are provided to assist debugging"/>
        <change desc="Better handling for exceptions with no messages set, especially NullPointer"/>
        <change desc="New configurable property logDirectory for Processes handler - determines where the standard out and error go when logging is on"/>
        <change desc="Handler property files for features with configurations now expect the configuration name before the handler type suffix. e.g. configA-remoting.properties instead of remoting-configA.properties"/>
    </version>
    <version>
        <versionNumber>1.3.9</versionNumber>
        <comment>General release, minor enhancements and fixes</comment>
        <change desc="Better error logging during feature run, don't log as a feature parsing error when the error occurs during feature processing"/>
        <change desc="StandardOutLogProvider is now the default even where apache commons logging is on the classpath. Use -DchorusLogProvider=org.chorusbdd.chorus.util.logging.ChorusCommonsLogProvider if you want Chorus to log using commons logging"/>
        <change desc="ChorusJUnitRunner can now accept interpreter parameters as a String, as an alternative to setting sys props"/>
        <bugfix desc="Set log level correctly when executing chorus tests as a JUnit suite with ChorusJUnitRunner"/>
        <bugfix desc="Handle Runtime exceptions thrown by user defined handler @Destroy methods"/>
    </version>
    <version>
        <versionNumber>1.3.8</versionNumber>
        <comment>Full Chorus Release</comment>
        <change desc="No functional changes, complete initial set of chorus self-tests"/>
    </version>
    <version>
        <versionNumber>0.3.7</versionNumber>
        <comment>Final beta release candidate for chorus</comment>
        <change desc="Support a returned value from remote step invocations"/>
        <change desc="Fixes for scenario tagging features"/>
        <change desc="Renamed Jxm Handler to Remoting Handler to support future protocols"/>
    </version>
    <version>
        <versionNumber>0.3.6</versionNumber>
        <comment>First beta release of Chorus</comment>
        <change desc="Set up Chorus for publication to Maven central"/>
    </version>
</changes>